<div
  *ngIf="!isCancel"
  class="gap-4 my-4 shadow p-3 border-r-10 position-relative"
  [@fadeInOut]
>
  <div class="d-flex gap-3">
    <div class="d-flex gap-3 flex-2 flex-column">
      <h6 class="text-default fz-16 fw-500">{{ item.BranchName }}</h6>
      <div class="d-flex gap-1">
        <div class="h-100">
          <img src="assets/Images/location-red.png" alt="" class="d-flex" />
        </div>
        <h6 class="text-default-light fz-12 fw-400">
          {{ item.BranchAddress }}
        </h6>
      </div>
      <div class="d-flex justify-content-around position-relative">
        <!--#region line progess -->
        <div class="progress-booking">
          <div
            class="progress-booking-percent"
            [style.width]="(isComplete ? 100 : 0) + '%'"
          ></div>
        </div>
        <!-- #region line progess -->
        <div
          class="d-flex flex-column gap-1 align-items-center"
          style="min-width: 80px"
        >
          <div class="h-100">
            <img src="assets/Images/mobile-red.png" alt="" />
          </div>
          <h6
            class="text-grey-light fz-12 fw-400"
            translate="COMMON.Receiving"
          ></h6>
        </div>

        <div
          class="d-flex flex-column gap-1 align-items-center"
          style="min-width: 80px"
        >
          <div class="h-100">
            <img src="assets/Images/table-red.png" alt="" />
          </div>
          <h6
            *ngIf="!isComplete"
            class="text-grey-light fz-12 fw-400"
            translate="COMMON.Preparing"
          ></h6>
          <h6
            *ngIf="isComplete"
            class="text-grey-light fz-12 fw-400"
            translate="COMMON.Completed-1"
          >
            <!-- Hoàn tất -->
          </h6>
        </div>
      </div>
    </div>

    <div class="d-flex flex-column flex-1">
      <div
        *ngIf="!isComplete"
        class="d-flex gap-1 px-1 justify-content-center align-items-center border-r-32 bg-yellow"
      >
        <div class="h-100">
          <img src="assets/Images/loading.png" alt="" class="trans-y-10" />
        </div>
        <h6 class="fz-12 fw-400" translate="COMMON.In-process"></h6>
      </div>

      <div
        *ngIf="isComplete"
        class="d-flex gap-1 px-1 justify-content-center align-items-center border-r-32 backg-success"
      >
        <div class="h-100">
          <img src="assets/Images/check.png" alt="" class="trans-y-10" />
        </div>
        <h6 class="fz-12 fw-400 text-white" translate="COMMON.Completed-2">
          <!-- Hoàn thành -->
        </h6>
      </div>

      <div
        class="d-flex gap-1 px-1 justify-content-end align-items-center mt-2"
      >
        <div class="h-100">
          <img src="assets/Images/clock-grey.png" alt="" class="trans-y-10" />
        </div>
        <h6 class="fz-14 text-grey">{{ date }}</h6>
      </div>

      <div class="d-flex gap-1 px-1 justify-content-end align-items-center">
        <h6 class="fz-20 text-grey">{{ time }}</h6>
      </div>

      <div
        class="d-flex gap-1 px-1 justify-content-end align-items-center mt-2"
      >
        <div class="h-100">
          <img src="assets/Images/star.png" alt="" class="trans-y-10" />
        </div>
        <h6 class="fz-14 text-yellow fw-400">
          +{{ item.bonus }} {{ "COMMON.Point" | translate }}
        </h6>
      </div>
    </div>
  </div>
  <hr style="left: 0; position: absolute; width: 100%" />

  <div *ngIf="!isComplete" class="d-flex gap-2 mt-3 pt-3">
    <button
      class="button px-4 py-2-5 border-r-32 button-red flex-2"
      (click)="toggleShowCancelLayout()"
    >
      <h6 class="fz-16 fw-500">
        {{ "COMMON.Cancel" | translate }} {{ "COMMON.Booking" | translate }}
      </h6>
    </button>

    <button
      (click)="showEditLayout()"
      style="flex: 1.5"
      class="button px-4 py-2 border-r-32 button-yellow"
    >
      <h6 class="fz-16 fw-500" translate="COMMON.Edit"></h6>
    </button>
  </div>

  <div *ngIf="isComplete" class="d-flex gap-2 mt-3 pt-3">
    <button class="button px-4 py-2-5 border-r-32 button-grey">
      <h6 class="fz-16 fw-500" translate="COMMON.Detail"></h6>
    </button>

    <button
      routerLink="booking"
      class="button px-4 py-2 border-r-32 button-blue d-flex align-items-center justify-content-center gap-2"
    >
      <div class="h-100">
        <img src="assets/Images/reload.png" alt="" class="" />
      </div>

      <h6 class="fz-16 fw-500" translate="COMMON.Set-again"></h6>
    </button>
  </div>
</div>

<div
  *ngIf="isCancel"
  class="gap-4 my-4 shadow p-3 border-r-10 position-relative"
  [@fadeInOut]
>
  <div class="d-flex gap-3">
    <div class="d-flex gap-3 flex-2 flex-column">
      <h6 class="text-default fz-16 fw-500 limit-line-1">
        {{ item.BranchName }}
      </h6>
      <div class="d-flex gap-1">
        <div class="h-100">
          <img
            src="assets/Images/location-red.png"
            alt=""
            class="d-flex filter-grey"
          />
        </div>
        <h6 class="text-default-light fz-12 fw-400 pe-4">
          {{ item.BranchAddress }}
        </h6>
      </div>
      <div class="d-flex justify-content-around position-relative">
        <!--#region line progess -->
        <div class="progress-booking">
          <div
            class="progress-booking-percent filter-grey-light"
            [style.width]="(isComplete ? 100 : 0) + '%'"
          ></div>
        </div>
        <!-- #region line progess -->
        <div
          class="d-flex flex-column gap-1 align-items-center"
          style="min-width: 80px"
        >
          <div class="h-100">
            <img
              src="assets/Images/mobile-red.png"
              class="filter-grey"
              alt=""
            />
          </div>
          <h6
            class="text-grey-light fz-12 fw-400"
            translate="COMMON.In-process"
          ></h6>
        </div>

        <div
          class="d-flex flex-column gap-1 align-items-center"
          style="min-width: 80px"
        >
          <div class="h-100">
            <img src="assets/Images/table-red.png" class="filter-grey" alt="" />
          </div>
          <h6
            *ngIf="!isComplete"
            class="text-grey-light fz-12 fw-400"
            translate="COMMON.Preparing"
          ></h6>
          <h6
            *ngIf="isComplete"
            class="text-grey-light fz-12 fw-400"
            translate="COMMON.Completed-1"
          ></h6>
        </div>
      </div>
    </div>

    <div class="d-flex flex-column flex-1">
      <div
        class="d-flex gap-1 px-1 justify-content-center align-items-center border-r-32 bg-red"
      >
        <div class="h-100">
          <img src="assets/Images/close.svg" alt="" class="trans-y-10" />
        </div>
        <h6 class="fz-12 fw-400 text-white" translate="COMMON.Cancelled"></h6>
      </div>

      <div
        class="d-flex gap-1 px-1 justify-content-end align-items-center mt-2"
      >
        <div class="h-100">
          <img src="assets/Images/clock-grey.png" alt="" class="trans-y-10" />
        </div>
        <h6 class="fz-14 text-grey">{{ date }}</h6>
      </div>

      <div class="d-flex gap-1 px-1 justify-content-end align-items-center">
        <h6 class="fz-20 text-grey">{{ time }}</h6>
      </div>
    </div>
  </div>
  <hr style="left: 0; position: absolute; width: 100%" />

  <div *ngIf="isComplete" class="d-flex gap-2 mt-3 pt-3 justify-content-end">
    <button
      class="button px-4 py-2 border-r-32 button-blue d-flex align-items-center justify-content-center gap-2"
    >
      <div class="h-100">
        <img src="assets/Images/reload.png" alt="" class="" />
      </div>
      <h6 class="fz-16 fw-500">Đặt lại</h6>
    </button>
  </div>
</div>

<app-booking-layout
  [showBooking]="showBooking"
  [item]="branch"
  [oldEdit]="item"
  (emit)="getShowBooking($event)"
></app-booking-layout>

<div
  [@fadeInOut]
  *ngIf="showCancelLayout"
  class="position-fixed position-center border-r-16 bg-white border-r-5 p-4"
  style="z-index: 1031; width: calc(100vw * 340 / 428)"
>
  <div class="d-flex flex-column gap-3 align-items-center">
    <div class="h-100">
      <img src="assets/Images/cancel-image.svg" alt="" />
    </div>

    <div class="d-flex flex-column gap-4">
      <h6
        class="fz-20 fw-600 text-center text-default"
        translate="msg.appointment-item-1"
      ></h6>

      <div class="d-flex flex-column gap-3">
        <div class="d-flex gap-3">
          <input
            class="cancel position-absolute w-100 opacity-0"
            type="radio"
            name="123"
            id="123"
          />
          <div class="sz-16 border-grey-light circle-border"></div>
          <label
            for="123"
            class="text-grey fz-14 fw-400"
            translate="msg.appointment-item-2"
          ></label>
        </div>

        <div class="d-flex gap-3">
          <input
            class="cancel position-absolute w-100 opacity-0"
            type="radio"
            name="123"
            id="123"
          />
          <div class="sz-16 border-grey-light circle-border"></div>
          <label
            for="123"
            class="text-grey fz-14 fw-400"
            translate="msg.appointment-item-3"
          ></label>
        </div>

        <div class="d-flex gap-3">
          <input
            class="cancel position-absolute w-100 opacity-0"
            type="radio"
            name="123"
            id="123"
          />
          <div class="sz-16 border-grey-light circle-border"></div>
          <label
            for="123"
            class="text-grey fz-14 fw-400"
            translate="msg.appointment-item-4"
          ></label>
        </div>
        <div class="d-flex gap-3">
          <input
            class="cancel position-absolute w-100 opacity-0"
            type="radio"
            name="123"
            id="123"
          />
          <div class="sz-16 border-grey-light circle-border"></div>
          <label
            for="123"
            class="text-grey fz-14 fw-400"
            translate="msg.appointment-item-5"
          ></label>
        </div>
      </div>
    </div>

    <div class="d-flex w-100 gap-3">
      <button (click)="cancelBooking()" class="button button-red py-2 flex-1">
        {{ "COMMON.Cancel" | translate }} {{ "COMMON.Booking" | translate }}
      </button>
      <button
        (click)="toggleShowCancelLayout()"
        class="button button-yellow py-2 flex-1"
        translate="COMMON.Continue"
      ></button>
    </div>
  </div>
</div>

<div
  *ngIf="showCancelLayout"
  (click)="toggleShowCancelLayout()"
  class="bg-overlay-light fixed-top w-100 h-100"
></div>
